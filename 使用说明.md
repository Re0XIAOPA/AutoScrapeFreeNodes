# 免费节点订阅抓取工具

这是一个自动抓取多个网站免费节点订阅链接并展示的工具。

## 功能特点

- 自动从`README.md`中列出的网站抓取免费节点订阅链接
- 深度抓取每个网站的多篇文章内容
- 智能识别文章中的订阅链接及其类型（Clash、V2ray、Sing-Box等）
- 提供简洁和详细两种视图展示订阅链接
- 详细视图可查看每篇文章的订阅链接来源
- 支持按订阅类型筛选
- 支持文本搜索订阅链接
- 提供一键复制和直接访问订阅链接功能
- 定时自动更新订阅（每15分钟更新一次）
- 获取新内容时会自动清除旧内容

## 安装和运行

### 安装依赖

```bash
npm install
```

### 运行服务

```bash
npm start
```

启动后，访问 http://localhost:3000 即可查看订阅链接信息。

## 添加新的节点源

编辑`README.md`文件，添加新的节点网站URL，每行一个。程序会自动从这些网站抓取订阅链接信息。

## 识别的订阅类型

工具可以自动识别以下类型的订阅链接：

- **Clash** - Clash客户端使用的订阅
- **V2ray** - V2ray客户端使用的订阅
- **Sing-Box** - Sing-Box客户端使用的订阅
- **Shadowrocket** - 小火箭客户端使用的订阅
- **Quantumult** - 圈X客户端使用的订阅
- **通用** - 其他类型或无法确定类型的订阅

## 视图切换

- **简洁视图**：只显示订阅链接列表，按网站分组
- **详细视图**：显示每个网站的所有文章及其包含的订阅链接

## 配置说明

默认配置已经能够满足基本需求，如需调整高级设置，可以修改以下文件：

- `index.js`: 修改端口号、定时任务频率等
- `scraper.js`: 调整抓取逻辑和订阅链接识别规则
- `public/index.html`: 自定义前端界面

### 抓取频率

系统默认每15分钟自动抓取一次新的订阅内容，抓取时会自动清除旧数据。抓取频率可以在`index.js`文件中通过修改cron表达式来调整：

```javascript
// 设置定时任务，每15分钟抓取一次
const job = new CronJob('*/15 * * * *', function() {
  console.log('执行定时抓取任务...');
  scraper.scrapeAllSites();
}, null, true);
```

## 订阅链接识别原理

系统采用多种方式识别网页中的订阅链接：

1. 通过关键词匹配（如"clash订阅链接"、"v2ray订阅地址"等）
2. 分析包含关键词的元素周围的链接
3. 分析文本内容中的URL模式

这种多层次的识别方法可以最大限度地提取出文章中的订阅链接。

## 常见问题

1. 如果某些站点无法抓取，可能是网站结构变化或添加了反爬措施，需要更新`scraper.js`中的抓取逻辑
2. 默认数据保存在`data`目录下，每个网站对应一个JSON文件
3. 订阅链接的质量和可用性由源网站决定，本工具不对订阅链接的可用性负责
4. 如果抓取频率太高可能会导致部分网站封禁IP，可以适当调整抓取间隔
5. 如需手动刷新数据，可以在网页上点击"刷新数据"按钮

## 技术栈

- 后端: Node.js, Express
- 前端: HTML, CSS, JavaScript, Bootstrap
- 数据抓取: Axios, Cheerio
- 定时任务: cron
